{% extends "base.html" %}

{% block title %}Share Information{% endblock %}

{% block content %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<div class="container mx-auto pt-24 px-4 md:px-8">
    <div class="max-w-2xl mx-auto bg-gray-800 rounded-lg shadow-xl p-6 mb-8 animate__animated animate__fadeIn">
        <div id="capture-area" class="p-6 mb-6 bg-blue-900 rounded-lg">
            <h1 class="text-2xl font-bold text-blue-300 mb-4">Information</h1>
            <p class="text-gray-300">This is the content that will be captured in the screenshot.</p>
        </div>

        <div class="text-center">
            <button id="screenshot-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition duration-200 animate__animated animate__pulse animate__infinite animate__slow">
                Take Screenshot
            </button>
        </div>
    </div>
</div>

<script>
    document.getElementById('screenshot-btn').addEventListener('click', async () => {
      try {
        const element = document.getElementById('capture-area');
        const canvas = await html2canvas(element, {
          useCORS: true, 
          logging: false 
        });

        canvas.toBlob(async (blob) => {
          try {
            await navigator.clipboard.write([
              new ClipboardItem({ 'image/png': blob })
            ]);
            alert('Screenshot copied to clipboard!');
          } catch (err) {
            console.error('error:', err);
            alert('Failed to copy screenshot');
          }
        }, 'image/png');
        
      } catch (err) {
        console.error('error:', err);
        alert('Failed to take screenshot');
      }
    });
</script>

{% endblock %}
