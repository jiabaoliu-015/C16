{% extends "base.html" %}

{% block title %}Share Data{% endblock %}

{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/share.css') }}">
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" integrity="sha512-CNgIRecGo7nphbeZ04Sc13ka07paqdeTu0WR1IM4kNcpmBAUSHSQX0FslNhTDadL4O5SAGapGt4FodqL8My0mA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="{{ url_for('static', filename='js/share.js') }}" defer></script>

<div class="share-container">
    <!-- date display -->
    <div class="header">
        <div class="date-display" id="current-date">
        </div>
    </div>

    <!-- wellcomewellcome -->
    <div class="welcome-banner">
        <h2>Welcome to the Share Interface!</h2>
        <p>Here you can select the content you want to share and generate a QR code. Use this to share your study progress with others!</p>
    </div>

    <!-- context -->
    <div class="content-section">
        <!-- Study Goals -->
        <div class="content-item">
            <div class="checkbox-container">
                <div class="custom-checkbox" data-content-id="study-goals"></div>
            </div>
            <div class="content-details">
                <div class="card">
                    <h2>Study Goals</h2>
                    <p class="stat">75%</p>
                    <p class="description">You are on track to meet your weekly goals.</p>
                    <p>Study Time: 2m</p>
                    <p>Goal: 4m</p>
                    <div class="progress-bar mt-4">
                        <div class="progress-bar-inner"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Study Streak -->
        <div class="content-item">
            <div class="checkbox-container">
                <div class="custom-checkbox" data-content-id="study-streak"></div>
            </div>
            <div class="content-details">
                <div class="card">
                    <h2>Study Streak</h2>
                    <div class="flex justify-around mb-4">
                        <div class="flex flex-col items-center">
                            <span class="text-gray-500 text-xl">ðŸ“…</span>
                            <span class="text-sm text-gray-500">Today</span>
                            <span class="text-lg font-bold text-gray-700">0m</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <span class="text-gray-500 text-xl">ðŸ“…</span>
                            <span class="text-sm text-gray-500">Week</span>
                            <span class="text-lg font-bold text-gray-700">3h 20m</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <span class="text-gray-500 text-xl">ðŸ“…</span>
                            <span class="text-sm text-gray-500">Month</span>
                            <span class="text-lg font-bold text-gray-700">2d 3h 40m</span>
                        </div>
                    </div>
                    <p>Streak: 4/5 days</p>
                    <div class="flex space-x-4 mt-4">
                        <div class="flex flex-col items-center">
                            <span class="text-red-500 text-2xl font-bold">âœ—</span>
                            <span class="text-xs text-gray-500">Day 1</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <span class="text-yellow-500 text-2xl font-bold">-</span>
                            <span class="text-xs text-gray-500">Day 2</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <span class="text-green-500 text-2xl font-bold">âœ“</span>
                            <span class="text-xs text-gray-500">Day 3</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <span class="text-gray-400 text-2xl font-bold">?</span>
                            <span class="text-xs text-gray-500">Day 4</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Focus Distribution -->
        <div class="content-item">
            <div class="checkbox-container">
                <div class="custom-checkbox" data-content-id="focus-distribution"></div>
            </div>
            <div class="content-details">
                <div class="card">
                    <h2>Focus Distribution</h2>
                    <img src="{{ url_for('static', filename='images/pie.png') }}" alt="Focus Distribution Pie Chart" class="w-full h-auto rounded-lg">
                </div>
            </div>
        </div>

        <!-- Study Graph -->
        <div class="content-item">
            <div class="checkbox-container">
                <div class="custom-checkbox" data-content-id="study-graph"></div>
            </div>
            <div class="content-details">
                <div class="card">
                    <div class="flex items-center justify-between mb-4">
                        <h2>Study Time Graph</h2>
                        <div class="flex space-x-2">
                            <button class="toggle-btn active" data-period="day">Day</button>
                            <button class="toggle-btn" data-period="week">Week</button>
                            <button class="toggle-btn" data-period="month">Month</button>
                        </div>
                    </div>
                    <div class="chart-container bg-gray-100 p-4 rounded-lg shadow-md mt-4">
                        <canvas id="studyTimeGraph" class="w-full h-64"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activities -->
        <div class="content-item">
            <div class="checkbox-container">
                <div class="custom-checkbox" data-content-id="activities"></div>
            </div>
            <div class="content-details">
                <div class="card">
                    <h2>Activities</h2>
                    <ul class="space-y-4">
                        <li class="flex items-center justify-between bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300">
                            <div>
                                <p class="text-lg font-semibold text-gray-700">Complete Assignment 2</p>
                                <p class="text-sm text-gray-500">Build a responsive portfolio website using HTML, CSS, and JavaScript.</p>
                            </div>
                            <span class="text-sm text-blue-500 font-semibold">Due: 3 days</span>
                        </li>
                        <li class="flex items-center justify-between bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300">
                            <div>
                                <p class="text-lg font-semibold text-gray-700">Attend Workshop</p>
                                <p class="text-sm text-gray-500">Learn advanced React.js concepts and state management.</p>
                            </div>
                            <span class="text-sm text-green-500 font-semibold">Tomorrow</span>
                        </li>
                        <li class="flex items-center justify-between bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300">
                            <div>
                                <p class="text-lg font-semibold text-gray-700">Group Project Meeting</p>
                                <p class="text-sm text-gray-500">Discuss API integration and database schema for the final project.</p>
                            </div>
                            <span class="text-sm text-yellow-500 font-semibold">In 2 days</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- URL generator -->
    <div class="url-generator">
        <h2>Generate Share URL</h2>
        <p>Select the content you want to share above, then click the button below to generate a shareable URL.</p>
        
        <button id="generate-url-btn" class="generate-btn">Generate Share URL</button>
        
        <div class="url-display" id="share-url-display">
            <!--  URL show here -->
        </div>
        
        <div class="flex justify-center mt-4">
            <button id="copy-url-btn" class="copy-btn">Copy URL</button>
        </div>
        
        <div class="qr-code-section mt-6">
            <h3>QR Code</h3>
            <p>Generate a QR code for your share link</p>
            <button id="generate-qr-btn" class="generate-btn mt-2">Generate QR Code</button>
            <div id="qr-code-container" class="flex justify-center mt-4">
                <!-- QR code show here -->
            </div>
            <div class="flex justify-center mt-4" id="qr-code-actions" style="display: none;">
                <button id="copy-qr-btn" class="copy-btn">Copy QR Code</button>
                <button id="download-qr-btn" class="copy-btn ml-2">Download QR Code</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/studyTimeGraph.js') }}"></script>

{% endblock %}
